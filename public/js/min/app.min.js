"use strict";var app=angular.module("app",[]);app.controller("BooksController",["$scope","$http",function(a,b){a.error="";var c=void 0;b({method:"GET",url:"users/user_id"}).success(function(a,b,d,e){c=a});var d=function(){b({method:"POST",url:"books/show"}).success(function(c,d,e,f){a.books=c;for(var g=function(c){b({method:"POST",url:"books/state",data:{isbn:a.books[c].isbn,campus:"nakano"}}).success(function(b,d,e,f){a.books[c].state=b})},h=0;h<a.books.length;h++)g(h)})};a.whose="mine",a.user_filter=function(){switch(a.whose){case"mine":return{user_id:c};case"ours":return;default:return}},d(),a.register=function(){b({method:"POST",url:"books/register",data:{isbn:a.isbn}}).success(function(){a.isbn="",a.error="",d()}).error(function(){a.error="登録できませんでした"})},a.delete=function(a){b({method:"POST",url:"books/delete",data:{id:parseInt(a)}}).success(function(a,b,c,e){d()})}}]);