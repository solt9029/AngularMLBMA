{"version":3,"sources":["../app.js"],"names":["app","angular","module","controller","$scope","$http","error","user_id","method","url","success","data","status","headers","config","showBooks","books","i","isbn","campus","state","length","whose","user_filter","register","delete","id","parseInt"],"mappings":";;AAAA,IAAIA,MAAIC,QAAQC,MAAR,CAAe,KAAf,EAAqB,EAArB,CAAR;;AAEAF,IAAIG,UAAJ,CAAe,iBAAf,EAAiC,CAAC,QAAD,EAAU,OAAV,EAAkB,UAASC,MAAT,EAAgBC,KAAhB,EAAsB;;AAExED,QAAOE,KAAP,GAAa,EAAb;;AAEA,KAAIC,gBAAJ;;AAEAF,OAAM;AACLG,UAAO,KADF;AAELC,OAAI;AAFC,EAAN,EAGGC,OAHH,CAGW,UAASC,IAAT,EAAcC,MAAd,EAAqBC,OAArB,EAA6BC,MAA7B,EAAoC;AAC9CP,YAAQI,IAAR;AACA,EALD;;AAOA,KAAII,YAAU,SAAVA,SAAU,GAAI;AACjBV,QAAM;AACLG,WAAO,MADF;AAELC,QAAI;AAFC,GAAN,EAGGC,OAHH,CAGW,UAASC,IAAT,EAAcC,MAAd,EAAqBC,OAArB,EAA6BC,MAA7B,EAAoC;AAC9CV,UAAOY,KAAP,GAAaL,IAAb;;AAD8C,8BAEtCM,CAFsC;AAG7CZ,UAAM;AACLG,aAAO,MADF;AAELC,UAAI,aAFC;AAGLE,WAAK,EAACO,MAAKd,OAAOY,KAAP,CAAaC,CAAb,EAAgBC,IAAtB,EAA2BC,QAAO,QAAlC;AAHA,KAAN,EAIGT,OAJH,CAIW,UAASC,IAAT,EAAcC,MAAd,EAAqBC,OAArB,EAA6BC,MAA7B,EAAoC;AAC9CV,YAAOY,KAAP,CAAaC,CAAb,EAAgBG,KAAhB,GAAsBT,IAAtB;AACA,KAND;AAH6C;;AAE9C,QAAI,IAAIM,IAAE,CAAV,EAAaA,IAAEb,OAAOY,KAAP,CAAaK,MAA5B,EAAoCJ,GAApC,EAAwC;AAAA,UAAhCA,CAAgC;AAQvC;AACD,GAdD;AAeA,EAhBD;;AAkBAb,QAAOkB,KAAP,GAAa,MAAb;;AAEAlB,QAAOmB,WAAP,GAAmB,YAAI;AACtB,UAAOnB,OAAOkB,KAAd;AACC,QAAK,MAAL;AACC,WAAO,EAACf,SAAQA,OAAT,EAAP;AACD,QAAK,MAAL;AACC;AACD;AACC;AANF;AAQA,EATD;;AAWAQ;;AAEAX,QAAOoB,QAAP,GAAgB,YAAI;AACnB;AACAnB,QAAM;AACLG,WAAO,MADF;AAELC,QAAI,gBAFC;AAGLE,SAAK,EAACO,MAAKd,OAAOc,IAAb;AAHA,GAAN,EAIGR,OAJH,CAIW,YAAU;AACpBN,UAAOc,IAAP,GAAY,EAAZ;AACAd,UAAOE,KAAP,GAAa,EAAb;AACAS;AACA,GARD,EAQGT,KARH,CAQS,YAAU;AAClBF,UAAOE,KAAP,GAAa,YAAb;AACA,GAVD;AAWA,EAbD;;AAeAF,QAAOqB,MAAP,GAAc,UAACC,EAAD,EAAM;AACnBrB,QAAM;AACLG,WAAO,MADF;AAELC,QAAI,cAFC;AAGLE,SAAK,EAACe,IAAGC,SAASD,EAAT,CAAJ;AAHA,GAAN,EAIGhB,OAJH,CAIW,UAASC,IAAT,EAAcC,MAAd,EAAqBC,OAArB,EAA6BC,MAA7B,EAAoC;AAC9CC;AACA,GAND;AAOA,EARD;AAUA,CAvEgC,CAAjC","file":"app.es5.js","sourcesContent":["let app=angular.module(\"app\",[]);\r\n\r\napp.controller(\"BooksController\",[\"$scope\",\"$http\",function($scope,$http){\r\n\r\n\t$scope.error=\"\";\r\n\r\n\tlet user_id;\r\n\r\n\t$http({\r\n\t\tmethod:\"GET\",\r\n\t\turl:\"users/user_id\"\r\n\t}).success(function(data,status,headers,config){\r\n\t\tuser_id=data;\r\n\t});\r\n\r\n\tlet showBooks=()=>{\r\n\t\t$http({\r\n\t\t\tmethod:\"POST\",\r\n\t\t\turl:\"books/show\",\r\n\t\t}).success(function(data,status,headers,config){\r\n\t\t\t$scope.books=data;\r\n\t\t\tfor(let i=0; i<$scope.books.length; i++){\r\n\t\t\t\t$http({\r\n\t\t\t\t\tmethod:\"POST\",\r\n\t\t\t\t\turl:\"books/state\",\r\n\t\t\t\t\tdata:{isbn:$scope.books[i].isbn,campus:\"nakano\"}\r\n\t\t\t\t}).success(function(data,status,headers,config){\r\n\t\t\t\t\t$scope.books[i].state=data;\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.whose=\"mine\";\r\n\r\n\t$scope.user_filter=()=>{\r\n\t\tswitch($scope.whose){\r\n\t\t\tcase \"mine\":\r\n\t\t\t\treturn {user_id:user_id};\r\n\t\t\tcase \"ours\":\r\n\t\t\t\treturn;\r\n\t\t\tdefault:\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tshowBooks();\r\n\r\n\t$scope.register=()=>{\r\n\t\t//登録する\r\n\t\t$http({\r\n\t\t\tmethod:\"POST\",\r\n\t\t\turl:\"books/register\",\r\n\t\t\tdata:{isbn:$scope.isbn}\r\n\t\t}).success(function(){\r\n\t\t\t$scope.isbn=\"\";\r\n\t\t\t$scope.error=\"\";\r\n\t\t\tshowBooks();\r\n\t\t}).error(function(){\r\n\t\t\t$scope.error=\"登録できませんでした\";\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.delete=(id)=>{\r\n\t\t$http({\r\n\t\t\tmethod:\"POST\",\r\n\t\t\turl:\"books/delete\",\r\n\t\t\tdata:{id:parseInt(id)}\r\n\t\t}).success(function(data,status,headers,config){\r\n\t\t\tshowBooks();\r\n\t\t});\r\n\t};\r\n\r\n}]);"]}